{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/tweet.service\";\nimport * as i3 from \"../services/authentication.service\";\nimport * as i4 from \"../services/modal.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../timeline/timeline.component\";\nimport * as i7 from \"../profile-editor-modal/profile-editor-modal.component\";\n\nfunction ProfileInfoComponent_app_profile_editor_modal_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-profile-editor-modal\");\n  }\n}\n\nfunction ProfileInfoComponent_div_3_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function ProfileInfoComponent_div_3_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.openProfileEditor());\n    });\n    i0.ɵɵtext(1, \"Edit Profile\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ProfileInfoComponent_div_3_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function ProfileInfoComponent_div_3_button_6_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.follow());\n    });\n    i0.ɵɵtext(1, \"Follow\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ProfileInfoComponent_div_3_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function ProfileInfoComponent_div_3_button_7_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r14.unfollow());\n    })(\"mouseenter\", function ProfileInfoComponent_div_3_button_7_Template_button_mouseenter_0_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r16.onHover($event));\n    })(\"mouseleave\", function ProfileInfoComponent_div_3_button_7_Template_button_mouseleave_0_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r17.releaseHover($event));\n    });\n    i0.ɵɵtext(1, \"Following\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ProfileInfoComponent_div_3_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"div\", 21)(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 22)(5, \"span\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r6.user.displayName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"@\", ctx_r6.user.tag, \"\");\n  }\n}\n\nfunction ProfileInfoComponent_div_3_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r7.user.bio);\n  }\n}\n\nfunction ProfileInfoComponent_div_3_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"div\", 21)(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 22)(5, \"span\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r8.auth.userDetails.getValue().displayName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"@\", ctx_r8.auth.userDetails.getValue().tag, \"\");\n  }\n}\n\nfunction ProfileInfoComponent_div_3_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r9.auth.userDetails.getValue().bio);\n  }\n}\n\nfunction ProfileInfoComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 6)(2, \"div\", 7);\n    i0.ɵɵelement(3, \"img\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 9);\n    i0.ɵɵtemplate(5, ProfileInfoComponent_div_3_button_5_Template, 2, 0, \"button\", 10);\n    i0.ɵɵtemplate(6, ProfileInfoComponent_div_3_button_6_Template, 2, 0, \"button\", 10);\n    i0.ɵɵtemplate(7, ProfileInfoComponent_div_3_button_7_Template, 2, 0, \"button\", 11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(8, ProfileInfoComponent_div_3_div_8_Template, 7, 2, \"div\", 12);\n    i0.ɵɵtemplate(9, ProfileInfoComponent_div_3_div_9_Template, 3, 1, \"div\", 13);\n    i0.ɵɵtemplate(10, ProfileInfoComponent_div_3_div_10_Template, 7, 2, \"div\", 12);\n    i0.ɵɵtemplate(11, ProfileInfoComponent_div_3_div_11_Template, 3, 1, \"div\", 13);\n    i0.ɵɵelementStart(12, \"div\", 14)(13, \"div\", 15)(14, \"span\", 16);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \"\\u00A0Following\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 17)(18, \"span\", 16);\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\u00A0Followers\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.tag == ctx_r1.auth.userDetails.getValue().tag);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r1.tag == ctx_r1.auth.userDetails.getValue().tag) && !ctx_r1.auth.userDetails.getValue().followed.includes(ctx_r1.user.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r1.tag == ctx_r1.auth.userDetails.getValue().tag) && ctx_r1.auth.userDetails.getValue().followed.includes(ctx_r1.user.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r1.tag == ctx_r1.auth.userDetails.getValue().tag));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r1.tag == ctx_r1.auth.userDetails.getValue().tag));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.tag == ctx_r1.auth.userDetails.getValue().tag);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.tag == ctx_r1.auth.userDetails.getValue().tag);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.user.followedText);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.user.followersText);\n  }\n}\n\nfunction ProfileInfoComponent_app_timeline_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-timeline\", 24);\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"tag\", ctx_r2.tag);\n  }\n}\n\nexport let ProfileInfoComponent = /*#__PURE__*/(() => {\n  class ProfileInfoComponent {\n    constructor(route, tweetService, auth, modalService) {\n      this.route = route;\n      this.tweetService = tweetService;\n      this.auth = auth;\n      this.modalService = modalService;\n    }\n\n    ngOnInit() {\n      this.loadProfile();\n    }\n\n    loadProfile() {\n      this.tweetService.getProfile(this.tag).subscribe(user => {\n        this.user = user;\n\n        if (this.user.followed.length < 10000) {\n          this.user.followedText = this.user.followed.length.toString();\n        } else if (this.user.followed.length < 1000000) {\n          this.user.followedText = this.user.followed.length.toString().slice(0, -3) + \"K\";\n        } else {\n          this.user.followedText = this.user.followed.length.toString().slice(0, -6) + \"M\";\n        }\n\n        if (this.user.followers.length < 10000) {\n          this.user.followersText = this.user.followers.length.toString();\n        } else if (this.user.followers.length < 1000000) {\n          this.user.followersText = this.user.followers.length.toString().slice(0, -3) + \"K\";\n        } else {\n          this.user.followersText = this.user.followers.length.toString().slice(0, -6) + \"M\";\n        }\n      });\n    }\n\n    onHover($event) {\n      $event.currentTarget.innerHTML = 'Unfollow';\n    }\n\n    releaseHover($event) {\n      $event.currentTarget.innerHTML = 'Following';\n    }\n\n    follow() {\n      this.tweetService.follow(this.tag).subscribe(() => {\n        this.auth.updateUserData().subscribe(data => {\n          this.auth.userDetails.next(data);\n        });\n      });\n    }\n\n    unfollow() {\n      this.tweetService.unfollow(this.tag).subscribe(() => {\n        this.auth.updateUserData().subscribe(data => {\n          this.auth.userDetails.next(data);\n        });\n      });\n    }\n\n    openProfileEditor() {\n      this.modalService.profileEditorModalOpen = true;\n    }\n\n  }\n\n  ProfileInfoComponent.ɵfac = function ProfileInfoComponent_Factory(t) {\n    return new (t || ProfileInfoComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.TweetService), i0.ɵɵdirectiveInject(i3.AuthenticationService), i0.ɵɵdirectiveInject(i4.ModalService));\n  };\n\n  ProfileInfoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProfileInfoComponent,\n    selectors: [[\"app-profile-info\"]],\n    inputs: {\n      tag: \"tag\"\n    },\n    decls: 5,\n    vars: 3,\n    consts: [[4, \"ngIf\"], [1, \"header-photo\"], [\"src\", \"./600x200.png\", 2, \"width\", \"100%\"], [\"class\", \"info-container\", 4, \"ngIf\"], [3, \"tag\", 4, \"ngIf\"], [1, \"info-container\"], [1, \"picture-and-btn\"], [1, \"profile-picture-container\"], [\"src\", \"./default_profile.png\", 1, \"profile-picture\"], [1, \"btn-container\"], [\"class\", \"btn btn-outlined\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-filled\", 3, \"click\", \"mouseenter\", \"mouseleave\", 4, \"ngIf\"], [\"class\", \"name-container\", 4, \"ngIf\"], [\"class\", \"bio-container\", 4, \"ngIf\"], [1, \"follow-counters\"], [1, \"following\"], [1, \"text-bold\"], [1, \"followers\"], [1, \"btn\", \"btn-outlined\", 3, \"click\"], [1, \"btn\", \"btn-filled\", 3, \"click\", \"mouseenter\", \"mouseleave\"], [1, \"name-container\"], [1, \"display-name\"], [1, \"tag\"], [1, \"bio-container\"], [3, \"tag\"]],\n    template: function ProfileInfoComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, ProfileInfoComponent_app_profile_editor_modal_0_Template, 1, 0, \"app-profile-editor-modal\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelement(2, \"img\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, ProfileInfoComponent_div_3_Template, 21, 9, \"div\", 3);\n        i0.ɵɵtemplate(4, ProfileInfoComponent_app_timeline_4_Template, 1, 1, \"app-timeline\", 4);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.modalService.profileEditorModalOpen);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.user);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.tag);\n      }\n    },\n    dependencies: [i5.NgIf, i6.TimelineComponent, i7.ProfileEditorModalComponent],\n    styles: [\".header-photo[_ngcontent-%COMP%]{width:100%}.info-container[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;display:flex;flex-direction:column;padding:0 15px;border-bottom:1px solid #e6ecf0}.picture-and-btn[_ngcontent-%COMP%]{display:flex;height:60px}.profile-picture-container[_ngcontent-%COMP%]{position:relative;bottom:85px;left:10px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.profile-picture[_ngcontent-%COMP%]{border-radius:9999px;border:5px solid white;height:135px;width:135px}.btn-container[_ngcontent-%COMP%]{flex-grow:1;margin-top:10px}.btn[_ngcontent-%COMP%]{transition:background-color .2s;float:right;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;cursor:pointer;border-radius:100px;font-weight:800;font-size:15px;text-align:center;padding:7px 13px;outline:none}.btn-outlined[_ngcontent-%COMP%]{border:1px solid #1da1f2;background-color:#fff;color:#1da1f2}.btn-outlined[_ngcontent-%COMP%]:hover{background-color:#eaf5fd;transition:background-color .2s}.btn-filled[_ngcontent-%COMP%]{border:none;background-color:#1da1f2;color:#fff}.btn-filled[_ngcontent-%COMP%]:hover{background-color:#e0245e}.name-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#14171a}.display-name[_ngcontent-%COMP%]{color:inherit;font-weight:900;font-size:18px}.tag[_ngcontent-%COMP%]{color:#657786}.bio-container[_ngcontent-%COMP%]{margin-top:10px}.follow-counters[_ngcontent-%COMP%]{margin:10px 0;display:flex}.following[_ngcontent-%COMP%]{margin-right:20px}.text-bold[_ngcontent-%COMP%]{font-weight:700}\"]\n  });\n  return ProfileInfoComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
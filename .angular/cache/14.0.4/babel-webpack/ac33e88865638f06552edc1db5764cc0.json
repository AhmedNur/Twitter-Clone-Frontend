{"ast":null,"code":"import { FormControl, FormGroup } from \"@angular/forms\";\nimport { Tweet } from \"../models/tweet\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/tweet.service\";\nimport * as i2 from \"../services/authentication.service\";\nimport * as i3 from \"../services/modal.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\n\nfunction TweetEditorComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function TweetEditorComponent_div_5_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.closeModal());\n    });\n    i0.ɵɵtext(2, \"X\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nexport let TweetEditorComponent = /*#__PURE__*/(() => {\n  class TweetEditorComponent {\n    constructor(tweetService, auth, modalService) {\n      this.tweetService = tweetService;\n      this.auth = auth;\n      this.modalService = modalService;\n      this.formGroup = new FormGroup({\n        tweetContent: new FormControl('')\n      });\n    }\n\n    ngOnInit() {}\n\n    createTweet() {\n      if (this.formGroup.controls['tweetContent'].value != '' && this.formGroup.controls['tweetContent'].value.toString().length <= 280) {\n        if (this.modalService.editorModalForReply) {\n          this.tweetService.replyToTweet(this.modalService.replyParentId, this.formGroup.controls['tweetContent'].value).subscribe(id => {\n            let tweet = new Tweet();\n            let currentUser = this.auth.userDetails.getValue();\n            tweet.parentId = this.modalService.replyParentId;\n            tweet.displayName = currentUser.displayName;\n            tweet.tag = currentUser.tag;\n            tweet.dateCreated = Date.now();\n            tweet.content = this.formGroup.controls['tweetContent'].value.toString();\n            tweet.likes = '0';\n            tweet.retweets = '0';\n            tweet.numOfReplies = '0';\n            tweet.id = id;\n            this.formGroup.controls['tweetContent'].setValue('');\n            this.closeModal();\n            this.tweetService.newTweets.unshift(tweet);\n          }, () => {}, () => {});\n        } else {\n          this.tweetService.createTweet(this.formGroup.controls['tweetContent'].value).subscribe(id => {\n            let tweet = new Tweet();\n            let currentUser = this.auth.userDetails.getValue();\n            tweet.id = id;\n            tweet.displayName = currentUser.displayName;\n            tweet.tag = currentUser.tag;\n            tweet.dateCreated = Date.now();\n            tweet.content = this.formGroup.controls['tweetContent'].value.toString();\n            tweet.likes = '0';\n            tweet.retweets = '0';\n            tweet.numOfReplies = '0';\n            this.formGroup.controls['tweetContent'].setValue('');\n            let editor = document.getElementById('tweet-editor-text-field');\n            editor.style.height = 24 + 'px';\n            this.closeModal();\n            this.tweetService.newTweets.unshift(tweet);\n          }, () => {}, () => {});\n        }\n      }\n    }\n\n    closeModal() {\n      this.modalService.editorModalOpen = false;\n      this.modalService.replyParentId = null;\n      this.modalService.editorModalForReply = false;\n    }\n\n    increaseTextAreaHeightAndCheckTweetLength() {\n      let editor = document.getElementById('tweet-editor-text-field');\n      editor.style.height = 24 + \"px\";\n      editor.style.height = editor.scrollHeight - 4 + \"px\";\n\n      if (this.formGroup.controls['tweetContent'].value.toString().length > 280) {\n        editor.style.backgroundColor = 'rgb(255, 184, 194)';\n      } else {\n        editor.style.backgroundColor = '#fff';\n      }\n    }\n\n  }\n\n  TweetEditorComponent.ɵfac = function TweetEditorComponent_Factory(t) {\n    return new (t || TweetEditorComponent)(i0.ɵɵdirectiveInject(i1.TweetService), i0.ɵɵdirectiveInject(i2.AuthenticationService), i0.ɵɵdirectiveInject(i3.ModalService));\n  };\n\n  TweetEditorComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TweetEditorComponent,\n    selectors: [[\"app-tweet-editor\"]],\n    inputs: {\n      inModal: \"inModal\",\n      replying: \"replying\"\n    },\n    decls: 11,\n    vars: 2,\n    consts: [[1, \"tweet-editor\"], [1, \"profile-picture-container\"], [\"href\", \"#\"], [\"src\", \"https://twitter.ahmednur.me/default_profile.png\", 1, \"profile-picture\"], [1, \"tweet-editor-content\", 3, \"formGroup\"], [\"class\", \"close-btn-container\", 4, \"ngIf\"], [\"id\", \"tweet-editor-text-field\", \"formControlName\", \"tweetContent\", \"placeholder\", \"What's happening?\", \"name\", \"tweetContent\", 1, \"tweet-editor-text-field\", 3, \"input\"], [1, \"tweet-editor-toolbar\"], [1, \"toolbar-item\"], [1, \"tweet-btn\", 3, \"click\"], [1, \"close-btn-container\"], [1, \"close-btn\", 3, \"click\"]],\n    template: function TweetEditorComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"a\", 2);\n        i0.ɵɵelement(3, \"img\", 3);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵtemplate(5, TweetEditorComponent_div_5_Template, 3, 0, \"div\", 5);\n        i0.ɵɵelementStart(6, \"textarea\", 6);\n        i0.ɵɵlistener(\"input\", function TweetEditorComponent_Template_textarea_input_6_listener() {\n          return ctx.increaseTextAreaHeightAndCheckTweetLength();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 7)(8, \"div\", 8)(9, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function TweetEditorComponent_Template_button_click_9_listener() {\n          return ctx.createTweet();\n        });\n        i0.ɵɵtext(10, \"Tweet\");\n        i0.ɵɵelementEnd()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"formGroup\", ctx.formGroup);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.inModal);\n      }\n    },\n    dependencies: [i4.NgIf, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.FormControlName],\n    styles: [\".tweet-editor[_ngcontent-%COMP%]{background-color:#fff;box-sizing:border-box;width:600px;display:flex;flex-direction:row;padding:9px 12px}.profile-picture-container[_ngcontent-%COMP%]{margin-top:10px;margin-right:10px}.profile-picture[_ngcontent-%COMP%]{width:48px;border-radius:50%}.tweet-editor-content[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.tweet-editor-text-field[_ngcontent-%COMP%]{background-color:#fff;border:none;resize:none;margin:20px 7px 5px;height:24px;font-size:18px;font-family:inherit;outline:none;word-break:break-all}.tweet-editor-text-field[_ngcontent-%COMP%]:empty:before{content:attr(placeholder);opacity:.5;display:block}.tweet-editor-toolbar[_ngcontent-%COMP%]{padding-top:10px;margin-right:7px;display:flex;flex-direction:row;justify-content:flex-end}.tweet-btn[_ngcontent-%COMP%]{background-color:#1da1f2;transition:background-color .2s;border-radius:9999px;border:none;outline:none;color:#fff;font-size:16px;font-weight:700;height:40px;padding:0 16px;display:inline-flex;justify-content:center;align-items:center}.tweet-btn[_ngcontent-%COMP%]:hover{background-color:#1a91da;cursor:pointer}#posted-tweet-container[_ngcontent-%COMP%]{border-bottom:1px solid #e6ecf0}.close-btn[_ngcontent-%COMP%]{transition-property:background-color;transition-duration:.2s;background-color:#fff;color:#1da1f2;border:none;outline:none;font-size:18px;border-radius:9999px;float:right}.close-btn[_ngcontent-%COMP%]:hover{background-color:#1da1f21a;cursor:pointer}.close-btn-container[_ngcontent-%COMP%]{margin-bottom:-23px}@media (max-width: 885px){.tweet-editor[_ngcontent-%COMP%]{width:auto}}\"]\n  });\n  return TweetEditorComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}